doctype html
html(lang="es")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title Dashboard | Clickwave
    link(rel="icon", type="image/png", href="/favicon.png")
    link(href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap", rel="stylesheet")
    link(rel="stylesheet", href="/css/dashboard.css")

  body.dashboard-layout
    aside.sidebar
      .sidebar-header
        h1.logo Clickwave
      nav.sidebar-nav
        ul
        li: a(href="/dashboard", class=(activePage === 'dashboard' ? 'active' : '')) ğŸ  Dashboard

        // Opciones solo para ADMINISTRADOR
        if user && user.rol === 'administrador'
          li: a(href="/admin/empleados") ğŸ‘¥ GestiÃ³n de Empleados
          li: a(href="/admin/roles") âš™ï¸ Roles y Permisos
          li: a(href="/proyectos") ğŸ—‚ï¸ Proyectos
          li: a(href="/empleado/tareas") ğŸ“‹ Tareas

        // Opciones solo para EMPLEADO
        if user && user.rol === 'empleado'
          li: a(href="/empleado/proyectos") ğŸ—‚ï¸ Mis Proyectos
          li: a(href="/empleado/tareas") ğŸ“‹ Mis Tareas
      .sidebar-footer
        a.logout(href="/auth/logout") ğŸšª Cerrar SesiÃ³n

    .main-container
      header.header
        .header-search
          input(type="text", placeholder="Buscar...")
        .header-user
          span Bienvenido, #{user ? user.nombre : 'Empleado'}
          .user-avatar #{user ? user.nombre[0].toUpperCase() : 'E'}

      main.main-content
        h2 Mi Dashboard
        .dashboard-grid
          .dash-card
            .dash-card-header
              h3 Mis Proyectos
              a(href="/mis-proyectos").btn-view-all Ver todos
            .dash-card-body
              ul.item-list
                if proyectos && proyectos.length > 0
                  each proyecto in proyectos
                    li.item
                      span.item-title= proyecto.nombre
                      span(class=`item-status ${proyecto.estado}`)= proyecto.estado
                else
                  li.item
                    span No hay proyectos asignados.

          .dash-card
            .dash-card-header
              h3 Mis Tareas Pendientes
              a(href="/mis-tareas").btn-view-all Ver todas
            .dash-card-body
              ul.item-list
                if tareas && tareas.length > 0
                  each tarea in tareas
                    li.item
                      span.item-title= tarea.descripcion || 'Tarea sin descripciÃ³n'
                      span(class=`item-status ${tarea.prioridad}`)= tarea.prioridad
                else
                  li.item
                    span No tienes tareas pendientes.
