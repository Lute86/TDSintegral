//- TAREAS
#tasksCard.dash-card
  .dash-card-header
    h3 Tareas del Proyecto
    if user && user.rol === "administrador"
      a.btn-view-all(href="#", onclick="openTaskModal(); return false;") âž• Nueva
  .dash-card-body
    if tareas && tareas.length > 0
      ul.task-list
        each t in tareas
          li.task-item
            .task-info
              .task-main
                strong.task-name= t.nombre
                p.task-desc= t.descripcion || "Sin descripciÃ³n"
              .task-meta
                small.task-project ðŸ“ #{ t.project ? t.project.nombre : 'N/A' }
                if t.empleados && t.empleados.length > 0
                  small.task-assigned ðŸ‘¤
                    |
                    each emp, i in t.empleados
                      span= emp.nombre + " " + (emp.apellido || "")
                      if i < t.empleados.length - 1
                        span ,
                else
                  small.task-assigned ðŸ‘¤ Sin asignar
            .task-actions
              if user && user.rol === "administrador"
                a.btn-edit(
                  href="#",
                  onclick="openEditTaskModal('" + t._id + "'); return false;"
                ) âœï¸
                form(
                  action="/tasks/" + t._id + "?_method=DELETE",
                  method="POST",
                  style="display: inline"
                )
                  button.btn-delete(
                    type="submit",
                    onclick="return confirm('Â¿Eliminar tarea?')"
                  ) ðŸ—‘ï¸
              else
                form(action="/tasks/" + t._id + "/estado", method="POST")
                  select(name="estado", onchange="this.form.submit()")
                    option(value="pendiente", selected=t.estado === "pendiente") Pendiente
                    option(
                      value="en proceso",
                      selected=t.estado === "en proceso"
                    ) En proceso
                    option(
                      value="finalizada",
                      selected=t.estado === "finalizada"
                    ) Finalizada
    else
      p.text-muted No hay tareas disponibles.
